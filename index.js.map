{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["'use strict';\n\nexport const searchingData = async (inputValue, axios, numOfPages) => {\n  return await axios.get(`https://pixabay.com/api/`, {\n    params: {\n      key: '48259740-4b53b0822f94ea1fa118abb4f',\n      q: inputValue,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page: 15,\n      page: numOfPages,\n    },\n  });\n};\n","'use strict';\n\nexport const errorMessage = (gallery, iziToast) => {\n  gallery.innerHTML = '';\n  iziToast.show({\n    message:\n      'Sorry, there are no images matching your search query. Please, try again!',\n    messageColor: '#fafafb',\n    backgroundColor: '#ef4040',\n    image: '../img/error.png',\n    imageWidth: 24,\n    zindex: 99999,\n    position: 'topRight',\n    maxWidth: '432px',\n    overlayColor: '#b51b1b',\n  });\n};\n\nexport const dataToImages = (hits, gallery) => {\n  const arrayOfTags = hits\n    .map(\n      objectOfImg => `<li class=\"elementOfGallery\">\n            <div class=\"imageOfElement\">\n              <a\n                href=\"${objectOfImg.largeImageURL}\"\n                ><img\n                  src=\"${objectOfImg.webformatURL}\"\n                  alt=\"${objectOfImg.tags}\"\n              /></a>\n              <div class=\"infoOfElement\">\n                <p><span>Likes </span> ${objectOfImg.likes}</p>\n                <p><span>Views </span> ${objectOfImg.views}</p>\n                <p><span>Comments </span> ${objectOfImg.comments}</p>\n                <p><span>Downloads </span> ${objectOfImg.downloads}</p>\n              </div>\n            </div>\n          </li>`\n    )\n    .join('');\n  gallery.insertAdjacentHTML('beforeend', arrayOfTags);\n};\n","'use strict';\n\nimport axios from 'axios';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { searchingData } from './js/pixabay-api';\nimport { errorMessage, dataToImages } from './js/render-functions';\n\nconst formInput = document.querySelector('.searchInput');\nconst formBtn = document.querySelector('.submitBtn');\nconst mainForm = document.querySelector('.mainForm');\nconst resultGallery = document.querySelector('.gallery');\nconst loadingProgress = document.querySelector('.loader');\nconst btnAsker = document.querySelector('.btnLoadMore');\nlet cardOfGallery;\nlet inputValue = '';\nlet numOfPages = 1;\nlet heightOfCard;\n\nmainForm.addEventListener('submit', event => {\n  event.preventDefault();\n\n  inputValue = formInput.value;\n\n  if (inputValue.trim() === '') {\n    iziToast.show({\n      message: 'There must be smth!',\n      messageColor: '#fafafb',\n      backgroundColor: '#ef4040',\n      position: 'topCenter',\n      overlayColor: '#b51b1b',\n    });\n    return;\n  } else {\n    btnAsker.classList.add('visually-hidden');\n    resultGallery.innerHTML = '';\n    numOfPages = 1;\n    loadingProgress.classList.remove('visually-hidden');\n    searchingData(inputValue, axios, numOfPages)\n      .then(array => {\n        loadingProgress.classList.add('visually-hidden');\n        btnAsker.classList.remove('visually-hidden');\n\n        const { hits } = array.data;\n\n        if (hits.length === 0) {\n          errorMessage(resultGallery, iziToast);\n          btnAsker.classList.add('visually-hidden');\n        } else {\n          dataToImages(hits, resultGallery);\n          new SimpleLightbox('.gallery a', {\n            captionsData: 'alt',\n            captionDelay: 250,\n          }).refresh();\n          if (array.data.totalHits <= numOfPages * 15) {\n            btnAsker.classList.add('visually-hidden');\n            iziToast.show({\n              message:\n                'We are sorry, but you have reached the end of search results.',\n              messageColor: '#000000',\n              backgroundColor: '#1e99e6',\n              position: 'center',\n              overlayColor: '#004b7a',\n            });\n          }\n        }\n      })\n      .catch(err =>\n        iziToast.show({\n          title: 'Sorry!',\n          titleColor: '#fafafb',\n          message: 'Something went wrong!',\n          messageColor: '#fafafb',\n          backgroundColor: '#db9e02',\n          position: 'center',\n          overlayColor: '#996e00',\n        })\n      );\n  }\n\n  mainForm.reset();\n});\n\nbtnAsker.addEventListener('click', event => {\n  event.preventDefault();\n\n  numOfPages += 1;\n\n  cardOfGallery = document.querySelector('.elementOfGallery');\n  heightOfCard = 3 * cardOfGallery.getBoundingClientRect().height;\n\n  btnAsker.classList.add('visually-hidden');\n  loadingProgress.classList.remove('visually-hidden');\n  searchingData(inputValue, axios, numOfPages)\n    .then(array => {\n      loadingProgress.classList.add('visually-hidden');\n      btnAsker.classList.remove('visually-hidden');\n\n      const { hits } = array.data;\n\n      dataToImages(hits, resultGallery);\n      new SimpleLightbox('.gallery a', {\n        captionsData: 'alt',\n        captionDelay: 250,\n      }).refresh();\n\n      setTimeout(() => {\n        window.scrollBy({\n          top: heightOfCard,\n          behavior: 'smooth',\n        });\n      }, 100);\n\n      if (array.data.totalHits <= numOfPages * 15) {\n        btnAsker.classList.add('visually-hidden');\n        iziToast.show({\n          message:\n            'We are sorry, but you have reached the end of search results.',\n          messageColor: '#000000',\n          backgroundColor: '#1e99e6',\n          position: 'center',\n          overlayColor: '#004b7a',\n        });\n      }\n    })\n    .catch(err =>\n      iziToast.show({\n        title: 'Sorry!',\n        titleColor: '#fafafb',\n        message: 'Something went wrong!',\n        messageColor: '#fafafb',\n        backgroundColor: '#db9e02',\n        position: 'center',\n        overlayColor: '#996e00',\n      })\n    );\n});\n"],"names":["searchingData","inputValue","axios","numOfPages","errorMessage","gallery","iziToast","dataToImages","hits","arrayOfTags","objectOfImg","formInput","mainForm","resultGallery","loadingProgress","btnAsker","cardOfGallery","heightOfCard","event","array","SimpleLightbox","err"],"mappings":"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"}